import{d as b,a as u,c as m,o as d,e as a,b as _,f as v,x,t as E,w as y,h as T,i as S}from"./index-DsliLC_t.js";const D={class:"node-t-card"},I={class:"node-header"},R={class:"header-actions"},w={key:0,class:"skeleton-container"},L={key:1},U={class:"name"},A=b({__name:"sql-script",props:{model:{},type:{},lf:{}},setup(o){const f=o;function C(){f.lf.deleteNode(f.model.id)}function N(){var g,k;const r=((k=(g=f.model)==null?void 0:g.properties)==null?void 0:k.scriptText)??"";if(!r||typeof r!="string")return"其他语句";let e=r.replace(/\/\*[\s\S]*?\*\//g," ");e=e.replace(/--.*(?=\n|$)/g," "),e=e.replace(/#.*(?=\n|$)/g," "),e=e.replace(/'([^'\\]|\\.|'')*'/g," "),e=e.replace(/"([^"\\]|\\.)*"/g," "),e=e.replace(/`([^`\\]|\\.)*`/g," ");const c=/[A-Za-z_][A-Za-z0-9_$]*|[(),;]/g,s=[];let l;for(;(l=c.exec(e))!==null;)s.push(l[0]);let i=0;for(let n=0;n<s.length;n++){const h=s[n];if(!h)continue;const t=h.toUpperCase();if(t==="("){i++;continue}else if(t===")"){i>0&&i--;continue}if(i===0){if(t==="SELECT")return"查询语句";if(t==="INSERT"||t==="INTO"&&n>0&&s[n-1].toUpperCase()==="INSERT")return"插入语句";if(t==="UPDATE")return"更新语句";if(t==="DELETE")return"删除语句";if(t==="MERGE")return"更新语句"}}const p=e.toUpperCase();return/^\s*SELECT\b/.test(p)?"查询语句":/^\s*INSERT\b/.test(p)?"插入语句":/^\s*UPDATE\b/.test(p)?"更新语句":/^\s*DELETE\b/.test(p)?"删除语句":"其他语句"}return(r,e)=>{const c=u("t-icon"),s=u("t-skeleton"),l=u("t-tag");return d(),m("div",D,[a("div",I,[_(c,{loadDefaultIcons:!1,name:"code",class:"title-icon"}),e[0]||(e[0]=a("span",{class:"title"},"SQL脚本",-1)),a("span",R,[o.type!=="publish"?(d(),v(c,{key:0,loadDefaultIcons:!1,name:"close",class:"close-icon",onClick:C})):x("",!0)])]),o.model.properties.name?(d(),m("div",L,[a("div",U,E(o.model.properties.name),1),_(l,{theme:"primary",variant:"outline",class:"tag"},{default:y(()=>[T(" 数据源："+E(o.model.properties.datasourceName)+" ",1),e[1]||(e[1]=a("br",null,null,-1)),T(" 类型："+E(N()),1)]),_:1})])):(d(),m("div",w,[_(s,{rowCol:[2,3]})]))])}}}),V=S(A,[["__scopeId","data-v-ebb2d92b"]]);export{V as default};
