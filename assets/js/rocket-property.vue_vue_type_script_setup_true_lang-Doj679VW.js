import{g as j}from"./source-C6q21X3i.js";import{d as B,db as E,r as V,v as L,a,c as S,o as c,b as l,u as n,w as r,F as M,y as P,f as Q,h as p,t as A}from"./index-DsliLC_t.js";const G=B({__name:"rocket-property",props:{nodeData:Object,lf:Object||String,flowDetail:{type:Object,default:()=>({})},type:{type:String}},setup(u,{expose:v,emit:g}){const i=u,m=g;let t=E({name:"RocketMQ消息发送",description:"",topic:null,datasourceCode:null,datasourceName:null,batchSplitSize:100});const k={name:[{required:!0,message:"名称必填"}],datasourceCode:[{required:!0,message:"数据源必填"}],topic:[{required:!0}],batchSplitSize:[{required:!0}]},C=()=>{i.lf.setProperties(i.nodeData.id,{...t})},x=d=>{d.validateResult===!0&&(C(),m("closed"))},f=V(null);function F(){f.value.submit()}const b=()=>{m("closed")},y=V([]);async function h(){await j({query:{type:"RocketMQ",status:"ENABLE"},page:{current:1,size:9999},orders:[]}).then(d=>{if(d){const{records:e}=d;y.value=e}}),Object.assign(t,i.nodeData.properties)}return L(()=>{h()}),v({cancelFunc:b,clickFormSubmit:F}),(d,e)=>{const _=a("t-input"),s=a("t-form-item"),w=a("t-option"),z=a("t-select"),D=a("t-input-number"),R=a("t-icon"),U=a("t-popup"),q=a("t-divider"),N=a("t-textarea"),O=a("t-form");return c(),S("div",null,[l(O,{ref_key:"form",ref:f,rules:k,data:n(t),colon:!0,onReset:b,onSubmit:x},{default:r(()=>[l(s,{label:"名称",name:"name"},{default:r(()=>[l(_,{modelValue:n(t).name,"onUpdate:modelValue":e[0]||(e[0]=o=>n(t).name=o),readonly:u.type==="publish",placeholder:"请输入内容"},null,8,["modelValue","readonly"])]),_:1}),l(s,{label:"数据源",name:"datasourceCode"},{default:r(()=>[l(z,{modelValue:n(t).datasourceCode,"onUpdate:modelValue":e[1]||(e[1]=o=>n(t).datasourceCode=o),readonly:u.type==="publish",filterable:"",placeholder:"请选择数据源",style:{width:"100%"}},{default:r(()=>[(c(!0),S(M,null,P(y.value,o=>(c(),Q(w,{value:o.code,onClick:I=>n(t).datasourceName=o.name,label:o.name},{default:r(()=>[p(A(o.name),1)]),_:2},1032,["value","onClick","label"]))),256))]),_:1},8,["modelValue","readonly"])]),_:1}),l(s,{label:"主题",name:"topic"},{default:r(()=>[l(_,{modelValue:n(t).topic,"onUpdate:modelValue":e[2]||(e[2]=o=>n(t).topic=o),readonly:u.type==="publish",placeholder:"请输入内容"},null,8,["modelValue","readonly"])]),_:1}),l(s,{label:"数据切片",name:"batchSplitSize"},{default:r(()=>[l(D,{modelValue:n(t).batchSplitSize,"onUpdate:modelValue":e[3]||(e[3]=o=>n(t).batchSplitSize=o),min:1,max:1e3,readonly:u.type==="publish",placeholder:"请输入"},null,8,["modelValue","readonly"]),e[5]||(e[5]=p("   ",-1)),l(U,{content:"对数据进行切割指定数量后分批发送，防止单个消息过长影响性能"},{default:r(()=>[l(R,{loadDefaultIcons:!1,name:"help-circle"})]),_:1})]),_:1}),l(q,null,{default:r(()=>[...e[6]||(e[6]=[p("其他配置",-1)])]),_:1}),l(s,{label:"描述",prop:"description"},{default:r(()=>[l(N,{modelValue:n(t).description,"onUpdate:modelValue":e[4]||(e[4]=o=>n(t).description=o),readonly:u.type==="publish",rows:4},null,8,["modelValue","readonly"])]),_:1})]),_:1},8,["data"])])}}});export{G as _};
