import{d as O,db as S,r as j,v as q,a,c as C,o as b,b as n,u as o,w as r,f as R,x as B,h as y}from"./index-DsliLC_t.js";const M=O({__name:"split-property",props:{nodeData:Object,lf:Object||String,flowDetail:{type:Object,default:()=>({})},type:{type:String}},setup(u,{expose:_,emit:V}){const d=u,s=V;let e=S({name:"数据切分",size:1e3,maxThreadNumber:5,description:null,concurrency:!1});const x={name:[{required:!0,message:"名称必填"}],size:[{required:!0}],maxThreadNumber:[{required:!0}],concurrency:[{required:!0}]},v=()=>{d.lf.setProperties(d.nodeData.id,{...e})},N=p=>{p.validateResult===!0&&(v(),s("closed"))},i=j(null);function g(){i.value.submit()}const c=()=>{s("closed")};async function k(){Object.assign(e,d.nodeData.properties)}return q(()=>{k()}),_({cancelFunc:c,clickFormSubmit:g}),(p,t)=>{const w=a("t-input"),m=a("t-form-item"),f=a("t-input-number"),T=a("t-switch"),U=a("t-icon"),h=a("t-popup"),z=a("t-divider"),D=a("t-textarea"),F=a("t-form");return b(),C("div",null,[n(F,{ref_key:"form",ref:i,rules:x,data:o(e),colon:!0,onReset:c,onSubmit:N},{default:r(()=>[n(m,{label:"名称",name:"name"},{default:r(()=>[n(w,{modelValue:o(e).name,"onUpdate:modelValue":t[0]||(t[0]=l=>o(e).name=l),readonly:u.type==="publish",placeholder:"请输入内容"},null,8,["modelValue","readonly"])]),_:1}),n(m,{label:"切割数",name:"size"},{default:r(()=>[n(f,{readonly:u.type==="publish",modelValue:o(e).size,"onUpdate:modelValue":t[1]||(t[1]=l=>o(e).size=l),min:1,max:5e4},null,8,["readonly","modelValue"])]),_:1}),n(m,{label:"多线程",name:"concurrency"},{default:r(()=>[n(T,{modelValue:o(e).concurrency,"onUpdate:modelValue":t[2]||(t[2]=l=>o(e).concurrency=l),"before-change":()=>u.type!=="publish"},null,8,["modelValue","before-change"]),t[5]||(t[5]=y("   ",-1)),n(h,{content:"切分后的数据是否使用多线程调用子节点"},{default:r(()=>[n(U,{loadDefaultIcons:!1,name:"help-circle"})]),_:1})]),_:1}),o(e).concurrency?(b(),R(m,{key:0,label:"最大线程数",name:"maxThreadNumber"},{default:r(()=>[n(f,{readonly:u.type==="publish",modelValue:o(e).maxThreadNumber,"onUpdate:modelValue":t[3]||(t[3]=l=>o(e).maxThreadNumber=l),min:1,max:20},null,8,["readonly","modelValue"])]),_:1})):B("",!0),n(z,null,{default:r(()=>[...t[6]||(t[6]=[y("其他配置",-1)])]),_:1}),n(m,{label:"描述",prop:"description"},{default:r(()=>[n(D,{modelValue:o(e).description,"onUpdate:modelValue":t[4]||(t[4]=l=>o(e).description=l),readonly:u.type==="publish",rows:4},null,8,["modelValue","readonly"])]),_:1})]),_:1},8,["data"])])}}});export{M as _};
