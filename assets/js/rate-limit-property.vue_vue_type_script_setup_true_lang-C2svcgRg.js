import{d as I,db as N,r as g,v as q,a as r,c as B,o as C,b as t,u as o,w as n,h as i}from"./index-DsliLC_t.js";const R=I({__name:"rate-limit-property",props:{nodeData:Object,lf:Object||String,flowDetail:{type:Object,default:()=>({})},type:{type:String}},setup(u,{expose:V,emit:v}){const m=u,p=v;let l=N({name:"限流",limit:10,refreshInterval:60,status:"ENABLE",chronoUnit:"SECONDS",description:""});const _={name:[{required:!0,message:"名称必填"}],limit:[{required:!0}],refreshInterval:[{required:!0}],chronoUnit:[{required:!0}],status:[{required:!0}]},U=()=>{m.lf.setProperties(m.nodeData.id,{...l})},S=b=>{b.validateResult===!0&&(U(),p("closed"))},f=g(null);function E(){f.value.submit()}const c=()=>{p("closed")};return q(()=>{Object.assign(l,m.nodeData.properties)}),V({cancelFunc:c,clickFormSubmit:E}),(b,e)=>{const x=r("t-input"),d=r("t-form-item"),y=r("t-input-number"),s=r("t-option"),h=r("t-select"),D=r("t-switch"),O=r("t-textarea"),w=r("t-form");return C(),B("div",null,[t(w,{ref_key:"form",ref:f,rules:_,data:o(l),colon:!0,onReset:c,onSubmit:S},{default:n(()=>[t(d,{label:"名称",name:"name"},{default:n(()=>[t(x,{modelValue:o(l).name,"onUpdate:modelValue":e[0]||(e[0]=a=>o(l).name=a),readonly:u.type==="publish",placeholder:"请输入内容"},null,8,["modelValue","readonly"])]),_:1}),t(d,{label:"速率",name:"limit"},{default:n(()=>[t(y,{modelValue:o(l).limit,"onUpdate:modelValue":e[1]||(e[1]=a=>o(l).limit=a),max:1e4,min:1,readonly:u.type==="publish",placeholder:"请输入速率"},null,8,["modelValue","readonly"])]),_:1}),t(d,{label:"刷新周期",name:"refreshInterval"},{default:n(()=>[t(y,{modelValue:o(l).refreshInterval,"onUpdate:modelValue":e[2]||(e[2]=a=>o(l).refreshInterval=a),max:1e4,min:1,readonly:u.type==="publish",placeholder:"请输入刷新周期"},null,8,["modelValue","readonly"])]),_:1}),t(d,{label:"时间单位",name:"chronoUnit"},{default:n(()=>[t(h,{modelValue:o(l).chronoUnit,"onUpdate:modelValue":e[3]||(e[3]=a=>o(l).chronoUnit=a),readonly:u.type==="publish",placeholder:"请选择时间单位",style:{width:"100%"}},{default:n(()=>[t(s,{value:"SECONDS",label:"秒"},{default:n(()=>[...e[6]||(e[6]=[i("秒",-1)])]),_:1}),t(s,{value:"MINUTES",label:"分钟"},{default:n(()=>[...e[7]||(e[7]=[i("分钟",-1)])]),_:1}),t(s,{value:"HOURS",label:"小时"},{default:n(()=>[...e[8]||(e[8]=[i("小时",-1)])]),_:1}),t(s,{value:"DAYS",label:"天"},{default:n(()=>[...e[9]||(e[9]=[i("天",-1)])]),_:1})]),_:1},8,["modelValue","readonly"])]),_:1}),t(d,{label:"状态",name:"status"},{default:n(()=>[t(D,{modelValue:o(l).status,"onUpdate:modelValue":e[4]||(e[4]=a=>o(l).status=a),"before-change":()=>u.type!=="publish",customValue:["ENABLE","DISABLE"]},null,8,["modelValue","before-change"])]),_:1}),t(d,{label:"描述",prop:"description"},{default:n(()=>[t(O,{modelValue:o(l).description,"onUpdate:modelValue":e[5]||(e[5]=a=>o(l).description=a),readonly:u.type==="publish",rows:4},null,8,["modelValue","readonly"])]),_:1})]),_:1},8,["data"])])}}});export{R as _};
