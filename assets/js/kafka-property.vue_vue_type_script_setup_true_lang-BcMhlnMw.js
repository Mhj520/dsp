import{g as B}from"./source-C6q21X3i.js";import{d as E,db as L,r as V,v as R,a as r,c as S,o as p,b as l,u as a,w as n,F as K,y as M,f as P,h as c,t as A}from"./index-DsliLC_t.js";const G=E({__name:"kafka-property",props:{nodeData:Object,lf:Object||String,flowDetail:{type:Object,default:()=>({})},type:{type:String}},setup(u,{expose:k,emit:v}){const i=u,f=v;let t=L({name:"Kafka消息发送",description:"",topic:null,datasourceCode:null,datasourceName:null,key:null,batchSplitSize:100});const g={name:[{required:!0,message:"名称必填"}],datasourceCode:[{required:!0,message:"数据源必填"}],topic:[{required:!0}],batchSplitSize:[{required:!0}]},C=()=>{i.lf.setProperties(i.nodeData.id,{...t})},x=s=>{s.validateResult===!0&&(C(),f("closed"))},y=V(null);function F(){y.value.submit()}const b=()=>{f("closed")},_=V([]);async function U(){await B({query:{type:"Kafka",status:"ENABLE"},page:{current:1,size:9999},orders:[]}).then(s=>{const{records:e}=s;_.value=e}),Object.assign(t,i.nodeData.properties)}return R(()=>{U()}),k({cancelFunc:b,clickFormSubmit:F}),(s,e)=>{const m=r("t-input"),d=r("t-form-item"),h=r("t-option"),w=r("t-select"),z=r("t-input-number"),D=r("t-icon"),q=r("t-popup"),N=r("t-divider"),O=r("t-textarea"),j=r("t-form");return p(),S("div",null,[l(j,{ref_key:"form",ref:y,rules:g,data:a(t),colon:!0,onReset:b,onSubmit:x},{default:n(()=>[l(d,{label:"名称",name:"name"},{default:n(()=>[l(m,{modelValue:a(t).name,"onUpdate:modelValue":e[0]||(e[0]=o=>a(t).name=o),readonly:u.type==="publish",placeholder:"请输入内容"},null,8,["modelValue","readonly"])]),_:1}),l(d,{label:"数据源",name:"datasourceCode"},{default:n(()=>[l(w,{readonly:u.type==="publish",filterable:"",modelValue:a(t).datasourceCode,"onUpdate:modelValue":e[1]||(e[1]=o=>a(t).datasourceCode=o),placeholder:"请选择数据源",style:{width:"100%"}},{default:n(()=>[(p(!0),S(K,null,M(_.value,o=>(p(),P(h,{value:o.code,onClick:I=>a(t).datasourceName=o.name,label:o.name},{default:n(()=>[c(A(o.name),1)]),_:2},1032,["value","onClick","label"]))),256))]),_:1},8,["readonly","modelValue"])]),_:1}),l(d,{label:"主题",name:"topic"},{default:n(()=>[l(m,{modelValue:a(t).topic,"onUpdate:modelValue":e[2]||(e[2]=o=>a(t).topic=o),readonly:u.type==="publish",placeholder:"请输入内容"},null,8,["modelValue","readonly"])]),_:1}),l(d,{label:"键",name:"key"},{default:n(()=>[l(m,{modelValue:a(t).key,"onUpdate:modelValue":e[3]||(e[3]=o=>a(t).key=o),readonly:u.type==="publish",placeholder:"请输入内容"},null,8,["modelValue","readonly"])]),_:1}),l(d,{label:"数据切片",name:"batchSplitSize"},{default:n(()=>[l(z,{modelValue:a(t).batchSplitSize,"onUpdate:modelValue":e[4]||(e[4]=o=>a(t).batchSplitSize=o),min:1,max:1e3,readonly:u.type==="publish",placeholder:"请输入"},null,8,["modelValue","readonly"]),e[6]||(e[6]=c("   ",-1)),l(q,{content:"对数据进行切割指定数量后分批发送，防止单个消息过长影响性能"},{default:n(()=>[l(D,{loadDefaultIcons:!1,name:"help-circle"})]),_:1})]),_:1}),l(N,null,{default:n(()=>[...e[7]||(e[7]=[c("其他配置",-1)])]),_:1}),l(d,{label:"描述",prop:"description"},{default:n(()=>[l(O,{modelValue:a(t).description,"onUpdate:modelValue":e[5]||(e[5]=o=>a(t).description=o),readonly:u.type==="publish",rows:4},null,8,["modelValue","readonly"])]),_:1})]),_:1},8,["data"])])}}});export{G as _};
